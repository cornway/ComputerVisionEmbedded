# Copyright (c) 2021 Nordic Semiconductor ASA
# SPDX-License-Identifier: Apache-2.0
#
# This is a Kconfig fragment which can be used to enable debug-related options
# in the application. See the README for more details.

CONFIG_CPP=y
CONFIG_STD_CPP20=y
CONFIG_CPP_EXCEPTIONS=y
CONFIG_CPP_RTTI=y

CONFIG_MAIN_STACK_SIZE=65536

# Ensure logs/printk come out before the crash
CONFIG_PRINTK=y
CONFIG_LOG=y
CONFIG_LOG_PRINTK=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_MODE_MINIMAL=y
CONFIG_LOG_MODE_DEFERRED=n     # immediate logs
#CONFIG_LOG_MODE_IMMEDIATE=y

CONFIG_SHELL=y

CONFIG_INPUT=y

CONFIG_REQUIRES_FULL_LIBC=y
CONFIG_GLIBCXX_LIBCPP=y

CONFIG_NEWLIB_LIBC=y
CONFIG_PICOLIBC=n

CONFIG_COMMON_LIBC_MALLOC=y
CONFIG_HEAP_MEM_POOL_SIZE=8192
#CONFIG_COMMON_LIBC_MALLOC_ARENA_SIZE=2097152
#CONFIG_COMMON_LIBC_MALLOC_ARENA_SIZE=1503232
CONFIG_COMMON_LIBC_MALLOC_ARENA_SIZE=524288

CONFIG_POSIX_API=y

CONFIG_ASSERT=y
# Make asserts print file:line and message
CONFIG_ASSERT_VERBOSE=y

#CONFIG_STACK_SENTINEL=y
#CONFIG_THREAD_STACK_INFO=y
#CONFIG_INIT_STACKS=y           # fill stacks, helps detect overflow

#CONFIG_DEBUG_OPTIMIZATIONS=y
CONFIG_SPEED_OPTIMIZATIONS=y

#CONFIG_TFLITE_LIB=y
#CONFIG_OPENCV_LIB=y
#CONFIG_QUIRC_LIB=y
#CONFIG_NEMA=y

CONFIG_FPU=y
CONFIG_FP_SOFTABI=y

CONFIG_GPIO=y
#CONFIG_SPI=y
#CONFIG_SPI_LOG_LEVEL_DBG=y

CONFIG_DMA=y
CONFIG_DMA_LOG_LEVEL_INF=y

CONFIG_SERIAL=y
CONFIG_RING_BUFFER=y
#CONFIG_UART_LOG_LEVEL_DBG=y

CONFIG_UART_ASYNC_API=y
CONFIG_UART_INTERRUPT_DRIVEN=y

CONFIG_STM32_JPEG=y

#CONFIG_DISPLAY_LOG_LEVEL_DBG=y

#CONFIG_HW_STACK_PROTECTION=y

# Better symbols for gdb
#CONFIG_DEBUG_INFO=y
# (Optional) minimal optimizations for nicer backtraces
# CONFIG_NO_OPTIMIZATIONS=y

# Richer fault dump on ARM (registers, etc.)
CONFIG_FAULT_DUMP=2

CONFIG_VIDEO_SHELL=y

CONFIG_STM32_JPEG_RGB_FORMAT=3
CONFIG_GRINREFLEX_JPEG_VIDEO=y
CONFIG_GRINREFLEX_JPEG_VIDEO_QUALITY=20
CONFIG_GRINREFLEX_VIDEO_WIDTH=640
CONFIG_GRINREFLEX_VIDEO_HEIGHT=480

#CONFIG_VIDEO_LOG_LEVEL_DBG=y
CONFIG_VIDEO_LOG_LEVEL_WRN=y
CONFIG_VIDEO_LOG_LEVEL_ERR=y

#CONFIG_VIDEO_BUFFER_POOL_SZ_MAX=76800
CONFIG_VIDEO_BUFFER_POOL_SZ_MAX=153600